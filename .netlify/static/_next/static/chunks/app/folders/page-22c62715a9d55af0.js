(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[312],{1010:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>x,eb:()=>p,gC:()=>f,l6:()=>o,yv:()=>m});var t=a(5155),r=a(2115),l=a(5755),n=a(4033),d=a(2108),i=a(5917),c=a(4269);let o=l.bL;l.YJ;let m=l.WT,x=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...d,children:[r,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})});h.displayName=l.PP.displayName;let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=l.wn.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...d}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-[999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-[var(--card)] text-[var(--foreground)] shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...d,children:[(0,t.jsx)(h,{}),(0,t.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(u,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:r})]})});p.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},1360:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1834:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>x,L3:()=>u,c7:()=>h,lG:()=>i,zM:()=>c});var t=a(5155),r=a(2115),l=a(7539),n=a(5229),d=a(4269);let i=l.bL,c=l.l9,o=l.ZL;l.bm;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=l.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let h=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};h.displayName="DialogHeader";let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});u.displayName=l.hE.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName=l.VY.displayName},3947:(e,s,a)=>{Promise.resolve().then(a.bind(a,4190))},4190:(e,s,a)=>{"use strict";a.d(s,{FoldersClient:()=>G});var t=a(5155),r=a(2115),l=a(4033),n=a(7937),d=a(9847),i=a(5870),c=a(9715),o=a(7586),m=a(1194),x=a(6191),h=a(1360),u=a(1847);let f=(0,u.A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),p=(0,u.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var j=a(2198);let g=(0,u.A)("move-horizontal",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]]);var v=a(7828),N=a(1010),y=a(2619),b=a.n(y),w=a(3998),C=a(6948),_=a(5142),k=a(1834),A=a(1186),S=a(1647),z=a(6648),F=a(7014),M=a(7673);let E=[{name:"General Context",type:"general",subfolders:["Technology Stack","Team Structure","Processes","Guidelines"]}],D=["Contexts","Meeting Summaries","User Stories"];function G(){let[e,s]=(0,r.useState)([]),[a,u]=(0,r.useState)(new Set),[y,G]=(0,r.useState)(!0),[q,R]=(0,r.useState)(!1),[$,T]=(0,r.useState)(""),[L,P]=(0,r.useState)("no-parent"),[Z,U]=(0,r.useState)("custom"),[B,O]=(0,r.useState)(null),[V,W]=(0,r.useState)(null),[H,J]=(0,r.useState)([]),[I,Y]=(0,r.useState)(null),[K,X]=(0,r.useState)(!1),{user:Q}=(0,F.A)(),ee=(0,z.S)();(0,r.useEffect)(()=>{Q&&es()},[Q]);let es=async()=>{if(Q)try{G(!0);let[e,a,t,r]=await Promise.all([ee.from("folders").select("*").eq("user_id",Q.id).order("name"),ee.from("documents").select("*").eq("user_id",Q.id).order("title"),ee.from("notes").select("folder_id").eq("user_id",Q.id),ee.from("todos").select("folder_id").eq("user_id",Q.id)]);if(e.error)throw e.error;let l=e.data||[],n=a.data||[],d=t.data||[],i=r.data||[],c=l.reduce((e,s)=>{let a=n.filter(e=>e.folder_id===s.id);return e[s.id]={documents:a,document_count:a.length,note_count:d.filter(e=>e.folder_id===s.id).length,todo_count:i.filter(e=>e.folder_id===s.id).length},e},{}),o=l.map(e=>({...e,children:[],...c[e.id]})),m=new Map;o.forEach(e=>m.set(e.id,e));let x=[];o.forEach(e=>{if(e.parent_id){let s=m.get(e.parent_id);s&&s.children.push(e)}else x.push(e)}),s(x);let h=n.filter(e=>!e.folder_id);J(h)}catch(e){console.error("Error loading folders:",e)}finally{G(!1)}},ea=async()=>{if(Q&&$.trim())try{let e=[];if("feature"===Z)e.push({name:$.trim(),parent_id:L&&"no-parent"!==L?L:void 0});else if("general"===Z){let s=E.find(e=>e.name===$.trim());s&&s.subfolders?e.push({name:s.name,parent_id:L&&"no-parent"!==L?L:void 0}):e.push({name:$.trim(),parent_id:L&&"no-parent"!==L?L:void 0})}else e.push({name:$.trim(),parent_id:L&&"no-parent"!==L?L:void 0});for(let s of e){let{data:e,error:a}=await ee.from("folders").insert([{name:s.name,parent_id:s.parent_id||null,user_id:Q.id}]).select().single();if(a)throw a;if("feature"===Z&&e)for(let s of D)await ee.from("folders").insert([{name:"".concat(s," - ").concat(e.name),parent_id:e.id,user_id:Q.id}]);else if("general"===Z&&e){let s=E.find(e=>e.name===$.trim());if(s&&s.subfolders)for(let a of s.subfolders)await ee.from("folders").insert([{name:a,parent_id:e.id,user_id:Q.id}])}}await es(),R(!1),T(""),P("no-parent"),U("custom")}catch(e){console.error("Error creating folder:",e)}},et=async()=>{T("General Context"),U("general"),P("no-parent"),await ea()},er=async e=>{if(Q)try{let{error:s}=await ee.from("folders").delete().eq("id",e).eq("user_id",Q.id);if(s)throw s;await es()}catch(e){console.error("Error deleting folder:",e)}},el=(e,s)=>{O(s),e.dataTransfer.effectAllowed="move"},en=(e,s)=>{e.preventDefault(),e.dataTransfer.dropEffect="move",W(s)},ed=e=>{let s=e.currentTarget.getBoundingClientRect(),a=e.clientX,t=e.clientY;(a<s.left||a>s.right||t<s.top||t>s.bottom)&&W(null)},ei=async(s,a)=>{if(s.preventDefault(),W(null),B)try{if(!(await fetch("/api/documents/".concat(B.id,"/folder"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({folderId:"unassigned"===a?null:a})})).ok)throw Error("Failed to move document");if(await es(),I){let s=eh(e).find(e=>e.id===I.id);s&&Y(s)}}catch(e){console.error("Error moving document:",e)}finally{O(null)}},ec=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},eo=e=>e.includes("pdf")?"\uD83D\uDCC4":e.includes("word")||e.includes("doc")?"\uD83D\uDCDD":e.includes("text")?"\uD83D\uDCC4":e.includes("image")?"\uD83D\uDDBC️":"\uD83D\uDCCE",em=async(s,a)=>{try{if(!(await fetch("/api/documents/".concat(s.id,"/folder"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({folderId:a})})).ok)throw Error("Failed to move document");if(await es(),I){let s=eh(e).find(e=>e.id===I.id);s&&Y(s)}}catch(e){console.error("Error moving document:",e)}},ex=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=a.has(e.id),j=e.children.length>0,g=(e.document_count||0)+(e.note_count||0)+(e.todo_count||0);return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border transition-colors hover:bg-[var(--muted)] ".concat(s>0?"ml-6 border-l-2 border-[var(--primary-green)]":""," ").concat(V===e.id?"bg-[var(--primary-green)]/10 border-[var(--primary-green)]":""),onDragOver:s=>en(s,e.id),onDragLeave:ed,onDrop:s=>ei(s,e.id),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[j?(0,t.jsx)("button",{onClick:()=>(e=>{let s=new Set(a);s.has(e)?s.delete(e):s.add(e),u(s)})(e.id),className:"text-[var(--muted-foreground)] hover:text-[var(--foreground)]",children:r?(0,t.jsx)(l.A,{className:"w-4 h-4"}):(0,t.jsx)(n.A,{className:"w-4 h-4"})}):(0,t.jsx)("div",{className:"w-4"}),(0,t.jsx)(d.A,{className:"w-5 h-5 text-[var(--primary-green)]"}),(0,t.jsxs)("div",{className:"flex-1 cursor-pointer",onDoubleClick:s=>{s.stopPropagation(),console.log("Double-click triggered for folder:",e.name),Y(e),X(!0)},children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name}),"General Context"===e.name&&(0,t.jsxs)(S.E,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(i.A,{className:"w-3 h-3 mr-1"}),"System"]}),e.parent_id&&D.some(s=>e.name.startsWith(s))&&(0,t.jsx)(S.E,{variant:"outline",className:"text-xs",children:"Feature Sub"})]}),g>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-xs text-[var(--muted-foreground)]",children:[(e.document_count||0)>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.document_count})]}),(e.note_count||0)>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(o.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.note_count})]}),(e.todo_count||0)>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(m.A,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.todo_count})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(k.lG,{children:[(0,t.jsx)(k.zM,{asChild:!0,children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>{P(e.id),T(""),U("custom")},children:(0,t.jsx)(x.A,{className:"w-4 h-4"})})}),(0,t.jsxs)(k.Cf,{children:[(0,t.jsx)(k.c7,{children:(0,t.jsxs)(k.L3,{children:['Create Subfolder in "',e.name,'"']})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Folder Name"}),(0,t.jsx)(_.p,{value:$,onChange:e=>T(e.target.value),placeholder:"Enter folder name..."})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(w.$,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,t.jsx)(w.$,{onClick:ea,disabled:!$.trim(),children:"Create"})]})]})]})]}),(0,t.jsx)(w.$,{variant:"ghost",size:"sm",onClick:()=>er(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(h.A,{className:"w-4 h-4"})})]})]}),r&&(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[j&&(0,t.jsx)("div",{className:"space-y-2",children:e.children.map(e=>ex(e,s+1))}),e.documents&&e.documents.length>0&&(0,t.jsxs)("div",{className:"space-y-1 ".concat(s>0?"ml-6":""),children:[(0,t.jsxs)("div",{className:"text-xs text-[var(--muted-foreground)] font-medium mb-2 flex items-center space-x-1",children:[(0,t.jsx)(c.A,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:["Documents (",e.documents.length,")"]})]}),e.documents.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border border-[var(--border)] bg-[var(--card)] cursor-move hover:bg-[var(--muted)] transition-colors",draggable:!0,onDragStart:s=>el(s,e),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,t.jsx)(f,{className:"w-4 h-4 text-[var(--muted-foreground)] flex-shrink-0"}),(0,t.jsx)("span",{className:"text-lg",children:eo(e.file_type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-sm truncate",children:e.title}),(0,t.jsxs)("div",{className:"text-xs text-[var(--muted-foreground)] flex items-center space-x-2",children:[(0,t.jsx)("span",{children:ec(e.file_size)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.file_type}),e.tags&&e.tags.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(e=>(0,t.jsx)(S.E,{variant:"outline",className:"text-xs px-1 py-0",children:e},e)),e.tags.length>2&&(0,t.jsxs)("span",{className:"text-xs",children:["+",e.tags.length-2]})]})]})]})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsx)(b(),{href:"/documents?id=".concat(e.id),children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,t.jsx)(p,{className:"w-3 h-3"})})})})]},e.id))]})]})]},e.id)},eh=e=>{let s=[];return e.forEach(e=>{s.push(e),e.children.length>0&&s.push(...eh(e.children))}),s},eu=eh(e),ef=e.some(e=>"General Context"===e.name);return y?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-[var(--primary-green)] border-t-transparent rounded-full animate-spin"})}):(0,t.jsx)(M.MainLayout,{children:(0,t.jsx)("div",{className:"flex-1 p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Folder Management"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Organize your documents, notes, and content into folders"})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[!ef&&(0,t.jsxs)(w.$,{onClick:et,variant:"outline",className:"flex items-center space-x-2",children:[(0,t.jsx)(i.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Create General Context"})]}),(0,t.jsxs)(k.lG,{open:q,onOpenChange:R,children:[(0,t.jsx)(k.zM,{asChild:!0,children:(0,t.jsxs)(w.$,{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"New Folder"})]})}),(0,t.jsxs)(k.Cf,{children:[(0,t.jsx)(k.c7,{children:(0,t.jsx)(k.L3,{children:"Create New Folder"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Folder Type"}),(0,t.jsxs)(A.l6,{value:Z,onValueChange:e=>U(e),children:[(0,t.jsx)(A.bq,{children:(0,t.jsx)(A.yv,{})}),(0,t.jsxs)(A.gC,{children:[(0,t.jsx)(A.eb,{value:"feature",children:"Feature Folder (with Contexts, Meeting Summaries, User Stories)"}),(0,t.jsx)(A.eb,{value:"general",children:"General Context Folder"}),(0,t.jsx)(A.eb,{value:"custom",children:"Custom Folder"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Folder Name"}),(0,t.jsx)(_.p,{value:$,onChange:e=>T(e.target.value),placeholder:"feature"===Z?"e.g., User Authentication, Payment System":"general"===Z?"General Context":"Enter folder name..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium",children:"Parent Folder (Optional)"}),(0,t.jsxs)(A.l6,{value:L,onValueChange:P,children:[(0,t.jsx)(A.bq,{children:(0,t.jsx)(A.yv,{placeholder:"Select parent folder..."})}),(0,t.jsxs)(A.gC,{children:[(0,t.jsx)(A.eb,{value:"no-parent",children:"No parent (root level)"}),eu.map(e=>(0,t.jsx)(A.eb,{value:e.id,children:e.name},e.id))]})]})]}),"feature"===Z&&(0,t.jsxs)("div",{className:"p-3 bg-[var(--muted)] rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-2",children:"This will create:"}),(0,t.jsxs)("ul",{className:"text-sm text-[var(--muted-foreground)] space-y-1",children:[(0,t.jsxs)("li",{children:["• ",$||"Feature Name"]}),(0,t.jsxs)("li",{className:"ml-4",children:["• Contexts - ",$||"Feature Name"]}),(0,t.jsxs)("li",{className:"ml-4",children:["• Meeting Summaries - ",$||"Feature Name"]}),(0,t.jsxs)("li",{className:"ml-4",children:["• User Stories - ",$||"Feature Name"]})]})]}),"general"===Z&&(0,t.jsxs)("div",{className:"p-3 bg-[var(--muted)] rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-2",children:"This will create:"}),(0,t.jsxs)("ul",{className:"text-sm text-[var(--muted-foreground)] space-y-1",children:[(0,t.jsx)("li",{children:"• General Context"}),(0,t.jsx)("li",{className:"ml-4",children:"• Technology Stack"}),(0,t.jsx)("li",{className:"ml-4",children:"• Team Structure"}),(0,t.jsx)("li",{className:"ml-4",children:"• Processes"}),(0,t.jsx)("li",{className:"ml-4",children:"• Guidelines"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(w.$,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,t.jsxs)(w.$,{onClick:ea,disabled:!$.trim(),children:["Create Folder","custom"!==Z?"s":""]})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{className:"pb-3",children:(0,t.jsxs)(C.ZB,{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(i.A,{className:"w-4 h-4 text-[var(--primary-green)]"}),(0,t.jsx)("span",{children:"General Context"})]})}),(0,t.jsxs)(C.Wu,{children:[(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mb-3",children:"Store technology stack, team structure, and process documentation for AI context."}),!ef&&(0,t.jsx)(w.$,{onClick:et,size:"sm",variant:"outline",className:"w-full",children:"Create General Context"}),ef&&(0,t.jsx)(S.E,{variant:"secondary",children:"Already created"})]})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{className:"pb-3",children:(0,t.jsxs)(C.ZB,{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(j.A,{className:"w-4 h-4 text-[var(--accent-blue)]"}),(0,t.jsx)("span",{children:"Feature Folders"})]})}),(0,t.jsxs)(C.Wu,{children:[(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mb-3",children:"Create feature-based folders with sub-organization for contexts, meeting summaries, and user stories."}),(0,t.jsx)(w.$,{onClick:()=>{U("feature"),T(""),R(!0)},size:"sm",variant:"outline",className:"w-full",children:"Create Feature Folder"})]})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{className:"pb-3",children:(0,t.jsxs)(C.ZB,{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 text-[var(--warning-amber)]"}),(0,t.jsx)("span",{children:"Custom Folders"})]})}),(0,t.jsxs)(C.Wu,{children:[(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mb-3",children:"Create custom folders for any specific organizational needs."}),(0,t.jsx)(w.$,{onClick:()=>{U("custom"),T(""),R(!0)},size:"sm",variant:"outline",className:"w-full",children:"Create Custom Folder"})]})]})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{children:"Folder Structure"})}),(0,t.jsx)(C.Wu,{children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-[var(--muted-foreground)]",children:[(0,t.jsx)(d.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No folders created yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Create your first folder to get started"})]}):(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>ex(e))})})]}),H.length>0&&(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsxs)(C.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(c.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Unassigned Documents"}),(0,t.jsx)(S.E,{variant:"secondary",children:H.length})]})}),(0,t.jsx)(C.Wu,{children:(0,t.jsxs)("div",{className:"space-y-1 p-3 rounded-lg border-2 border-dashed transition-colors ".concat("unassigned"===V?"border-[var(--primary-green)] bg-[var(--primary-green)]/10":"border-[var(--border)]"),onDragOver:e=>en(e,"unassigned"),onDragLeave:ed,onDrop:e=>ei(e,"unassigned"),children:[(0,t.jsx)("div",{className:"text-xs text-[var(--muted-foreground)] mb-2",children:"Drop documents here to remove from folders"}),H.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border border-[var(--border)] bg-[var(--card)] cursor-move hover:bg-[var(--muted)] transition-colors",draggable:!0,onDragStart:s=>el(s,e),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,t.jsx)(f,{className:"w-4 h-4 text-[var(--muted-foreground)] flex-shrink-0"}),(0,t.jsx)("span",{className:"text-lg",children:eo(e.file_type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-sm truncate",children:e.title}),(0,t.jsxs)("div",{className:"text-xs text-[var(--muted-foreground)] flex items-center space-x-2",children:[(0,t.jsx)("span",{children:ec(e.file_size)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.file_type})]})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:(0,t.jsx)(b(),{href:"/documents?id=".concat(e.id),children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,t.jsx)(p,{className:"w-3 h-3"})})})})]},e.id))]})})]}),(0,t.jsx)(C.Zp,{className:"border-[var(--border)] bg-[var(--muted)]",children:(0,t.jsx)(C.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-[var(--muted-foreground)] mt-0.5"}),(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-sm text-[var(--muted-foreground)]",children:"Well-organized folders help the AI provide more relevant guidance for your specific features and contexts."})})]})})}),(0,t.jsx)(k.lG,{open:K,onOpenChange:X,children:(0,t.jsxs)(k.Cf,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(k.c7,{children:(0,t.jsxs)(k.L3,{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-[var(--primary-green)]"}),(0,t.jsx)("span",{children:null==I?void 0:I.name}),(null==I?void 0:I.documents)&&(0,t.jsxs)(S.E,{variant:"secondary",children:[I.documents.length," documents"]})]})}),I&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-[var(--muted-foreground)] bg-[var(--muted)] p-3 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[I.document_count||0," documents"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(o.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[I.note_count||0," notes"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[I.todo_count||0," todos"]})]})]}),I.documents&&I.documents.length>0?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-[var(--muted-foreground)]",children:"Documents"}),(0,t.jsx)("div",{className:"space-y-2",children:I.documents.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-[var(--card)] hover:bg-[var(--muted)] transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"text-lg",children:eo(e.file_type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-sm truncate",children:e.title}),(0,t.jsxs)("div",{className:"text-xs text-[var(--muted-foreground)] flex items-center space-x-2",children:[(0,t.jsx)("span",{children:ec(e.file_size)}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:e.file_type}),e.tags&&e.tags.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e.tags.slice(0,2).map(e=>(0,t.jsx)(S.E,{variant:"outline",className:"text-xs px-1 py-0",children:e},e)),e.tags.length>2&&(0,t.jsxs)("span",{className:"text-xs",children:["+",e.tags.length-2]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(k.lG,{children:[(0,t.jsx)(k.zM,{asChild:!0,children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(g,{className:"w-4 h-4"})})}),(0,t.jsxs)(k.Cf,{children:[(0,t.jsx)(k.c7,{children:(0,t.jsx)(k.L3,{children:"Move Document"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("p",{className:"text-sm text-[var(--muted-foreground)]",children:['Select a destination folder for "',e.title,'"']}),(0,t.jsxs)(A.l6,{onValueChange:s=>{em(e,"unassigned"===s?null:s)},children:[(0,t.jsx)(A.bq,{children:(0,t.jsx)(A.yv,{placeholder:"Select destination folder..."})}),(0,t.jsxs)(A.gC,{children:[(0,t.jsx)(A.eb,{value:"unassigned",children:"Unassigned (No folder)"}),eu.filter(e=>e.id!==I.id).map(e=>(0,t.jsx)(A.eb,{value:e.id,children:e.name},e.id))]})]})]})]})]}),(0,t.jsx)(b(),{href:"/documents?id=".concat(e.id),children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(v.A,{className:"w-4 h-4"})})}),(0,t.jsx)(b(),{href:"/documents?id=".concat(e.id,"&edit=true"),children:(0,t.jsx)(w.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(N.A,{className:"w-4 h-4"})})})]})]},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-[var(--muted-foreground)]",children:[(0,t.jsx)(c.A,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No documents in this folder"}),(0,t.jsx)("p",{className:"text-sm",children:"Drag documents here from other folders or upload new ones"})]}),I.children&&I.children.length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-[var(--muted-foreground)]",children:"Subfolders"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:I.children.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded border bg-[var(--card)] hover:bg-[var(--muted)] cursor-pointer transition-colors",onDoubleClick:()=>{Y(e)},children:[(0,t.jsx)(d.A,{className:"w-4 h-4 text-[var(--primary-green)]"}),(0,t.jsx)("span",{className:"text-sm font-medium truncate",children:e.name}),(0,t.jsx)("div",{className:"ml-auto text-xs text-[var(--muted-foreground)]",children:(e.document_count||0)+(e.note_count||0)+(e.todo_count||0)})]},e.id))})]})]})]})})]})})})}},7586:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},7828:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{e.O(0,[954,545,224,478,539,673,441,255,358],()=>e(e.s=3947)),_N_E=e.O()}]);