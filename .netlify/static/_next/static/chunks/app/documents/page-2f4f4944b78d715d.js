(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{1186:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>f,gC:()=>h,l6:()=>o,yv:()=>m});var a=t(5155),r=t(2115),l=t(5755),i=t(4033),n=t(2108),d=t(5917),c=t(4269);let o=l.bL;l.YJ;let m=l.WT,x=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.l9.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.PP.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=l.wn.displayName;let h=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-[999] max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-[var(--card)] text-[var(--foreground)] shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,a.jsx)(p,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===i&&"w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(u,{})]})})});h.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:r})]})});f.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},1691:(e,s,t)=>{Promise.resolve().then(t.bind(t,9376))},1834:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>x,L3:()=>u,c7:()=>p,lG:()=>d,zM:()=>c});var a=t(5155),r=t(2115),l=t(7539),i=t(5229),n=t(4269);let d=l.bL,c=l.l9,o=l.ZL;l.bm;let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=l.hJ.displayName;let x=r.forwardRef((e,s)=>{let{className:t,children:r,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(l.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...d,children:[r,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};p.displayName="DialogHeader";let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});u.displayName=l.hE.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})}).displayName=l.VY.displayName},9376:(e,s,t)=>{"use strict";t.d(s,{DocumentsPageClient:()=>L});var a=t(5155),r=t(2115),l=t(1786),i=t(6955),n=t(9847),d=t(7673),c=t(5978),o=t(5530),m=t(3),x=t(3998),p=t(6948),u=t(1186),h=t(1834),f=t(7772),j=t(7726),v=t(6485),g=t(9074),N=t(7828),y=t(9867),w=t(4269);function b(e){var s;let{document:t,folders:l=[],onView:i,onDownload:d,onDelete:c,onMoveToFolder:o}=e,[m,b]=(0,r.useState)(!1),[C,A]=(0,r.useState)(t.folder_id||"no-folder"),D=(0,w.oP)(t.fileType);return(0,a.jsxs)(p.Zp,{className:"group hover:shadow-md transition-all duration-200 hover:border-[var(--primary-green)] w-full overflow-hidden",children:[(0,a.jsx)(p.aR,{className:"pb-3 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-2xl flex-shrink-0",children:D}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-medium text-sm truncate max-w-full overflow-hidden text-ellipsis whitespace-nowrap",title:t.title,children:t.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-[var(--muted-foreground)]",children:(null==(s=t.fileType)?void 0:s.toUpperCase())||"UNKNOWN"}),(0,a.jsx)("span",{className:"text-xs text-[var(--muted-foreground)]",children:"â€¢"}),(0,a.jsxs)("span",{className:"text-xs text-[var(--muted-foreground)]",children:[(0,w.z3)(2*t.content.length)," "]})]})]})]}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})})]})}),(0,a.jsx)(p.Wu,{className:"pt-0",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-xs text-[var(--muted-foreground)] line-clamp-2",children:[t.content.substring(0,120),"..."]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[t.artifactType&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat((0,w.fK)(t.artifactType)),children:t.artifactType}),t.priority&&(0,a.jsxs)("span",{className:"text-xs font-medium ".concat((0,w.eX)(t.priority)),children:[t.priority," Priority"]})]}),t.tags.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 flex-wrap",children:[(0,a.jsx)(j.A,{className:"w-3 h-3 text-[var(--muted-foreground)]"}),t.tags.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"text-xs bg-[var(--muted)] px-2 py-1 rounded",children:e},s)),t.tags.length>3&&(0,a.jsxs)("span",{className:"text-xs text-[var(--muted-foreground)]",children:["+",t.tags.length-3," more"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-[var(--border)]",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 text-[var(--muted-foreground)]"}),(0,a.jsx)("span",{className:"text-xs text-[var(--muted-foreground)]",children:new Date(t.updatedAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[o&&(0,a.jsxs)(h.lG,{open:m,onOpenChange:b,children:[(0,a.jsx)(h.zM,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity",title:"Move to folder",children:(0,a.jsx)(g.A,{className:"w-4 h-4"})})}),(0,a.jsxs)(h.Cf,{children:[(0,a.jsx)(h.c7,{children:(0,a.jsx)(h.L3,{children:"Move Document to Folder"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"text-sm font-medium",children:["Document: ",t.title]})}),l.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Select Folder:"}),(0,a.jsxs)(u.l6,{value:C,onValueChange:A,children:[(0,a.jsx)(u.bq,{className:"mt-2",children:(0,a.jsx)(u.yv,{placeholder:"Choose a folder..."})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"no-folder",children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{children:"No Folder"})})}),l.map(e=>(0,a.jsx)(u.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,a.jsx)(x.$,{onClick:()=>{null==o||o(t,"no-folder"===C?null:C),b(!1)},children:"Move Document"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)(n.A,{className:"w-12 h-12 mx-auto mb-3 text-[var(--muted-foreground)]"}),(0,a.jsx)("p",{className:"text-sm text-[var(--muted-foreground)] mb-2",children:"No folders available"}),(0,a.jsx)("p",{className:"text-xs text-[var(--muted-foreground)]",children:"Create folders first to organize your documents"})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:()=>b(!1),children:"Close"}),(0,a.jsx)(x.$,{asChild:!0,children:(0,a.jsx)("a",{href:"/folders",children:"Create Folders"})})]})]})]})]})]}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>null==i?void 0:i(t),title:"View document",children:(0,a.jsx)(N.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>null==d?void 0:d(t),title:"Download document",children:(0,a.jsx)(y.A,{className:"w-4 h-4"})})]})]})]})})]})}function C(e){let{documents:s,onView:t,onDownload:r,onDelete:l}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4 py-2 text-sm font-medium text-[var(--muted-foreground)] border-b border-[var(--border)]",children:[(0,a.jsx)("div",{className:"col-span-4",children:"Name"}),(0,a.jsx)("div",{className:"col-span-2",children:"Type"}),(0,a.jsx)("div",{className:"col-span-2",children:"Artifact"}),(0,a.jsx)("div",{className:"col-span-1",children:"Priority"}),(0,a.jsx)("div",{className:"col-span-2",children:"Modified"}),(0,a.jsx)("div",{className:"col-span-1",children:"Actions"})]}),s.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 hover:bg-[var(--muted)] rounded-lg transition-colors group",children:[(0,a.jsxs)("div",{className:"col-span-4 flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:(0,w.oP)(e.fileType)}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-sm truncate",title:e.title,children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[e.tags.slice(0,2).map((e,s)=>(0,a.jsx)("span",{className:"text-xs bg-[var(--muted)] px-2 py-1 rounded",children:e},s)),e.tags.length>2&&(0,a.jsxs)("span",{className:"text-xs text-[var(--muted-foreground)]",children:["+",e.tags.length-2]})]})]})]}),(0,a.jsx)("div",{className:"col-span-2 flex items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.fileType.toUpperCase()}),(0,a.jsx)("p",{className:"text-xs text-[var(--muted-foreground)]",children:(0,w.z3)(2*e.content.length)})]})}),(0,a.jsx)("div",{className:"col-span-2 flex items-center",children:e.artifactType?(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat((0,w.fK)(e.artifactType)),children:e.artifactType}):(0,a.jsx)("span",{className:"text-sm text-[var(--muted-foreground)]",children:"â€”"})}),(0,a.jsx)("div",{className:"col-span-1 flex items-center",children:e.priority?(0,a.jsx)("span",{className:"text-xs font-medium ".concat((0,w.eX)(e.priority)),children:e.priority}):(0,a.jsx)("span",{className:"text-sm text-[var(--muted-foreground)]",children:"â€”"})}),(0,a.jsx)("div",{className:"col-span-2 flex items-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 text-[var(--muted-foreground)]"}),(0,a.jsx)("span",{className:"text-sm text-[var(--muted-foreground)]",children:new Date(e.updatedAt).toLocaleDateString()})]})}),(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-end",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:()=>null==t?void 0:t(e),children:(0,a.jsx)(N.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:()=>null==r?void 0:r(e),children:(0,a.jsx)(y.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",className:"w-8 h-8",children:(0,a.jsx)(f.A,{className:"w-4 h-4"})})]})})]},e.id))]})}let A=[{id:"1",title:"PI Planning Q4 2024 - Epic Overview",content:"Program Increment planning document for Q4 2024 focusing on mobile application features and customer experience improvements. This epic encompasses multiple features including user authentication, payment processing, and enhanced search capabilities...",fileUrl:"/uploads/pi-planning-q4.pdf",fileType:"pdf",tags:["pi-planning","epic","mobile"],artifactType:"Epic",priority:"High",userId:"user1",createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20")},{id:"2",title:"User Authentication Feature Requirements",content:"Detailed requirements for implementing secure user authentication including OAuth integration, multi-factor authentication, and password policies. The feature supports social login providers and enterprise SSO...",fileUrl:"/uploads/auth-requirements.docx",fileType:"docx",tags:["authentication","security","feature"],artifactType:"Feature",priority:"High",userId:"user1",createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-18")},{id:"3",title:"Sprint 23 Retrospective Notes",content:"Retrospective notes from Sprint 23 covering what went well, what could be improved, and action items for the next sprint. Team velocity increased by 15% this sprint...",fileUrl:"/uploads/sprint-23-retro.md",fileType:"md",tags:["retrospective","sprint","improvement"],artifactType:"User Story",priority:"Medium",userId:"user1",createdAt:new Date("2024-01-08"),updatedAt:new Date("2024-01-16")},{id:"4",title:"Payment Gateway Integration Story",content:"As a customer, I want to securely pay for my orders using multiple payment methods so that I can complete my purchase conveniently. Acceptance criteria include support for credit cards, PayPal, and digital wallets...",fileUrl:"/uploads/payment-story.txt",fileType:"txt",tags:["payment","integration","user-story"],artifactType:"User Story",priority:"Medium",userId:"user1",createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-14")},{id:"5",title:"Mobile App Capability Overview",content:"Capability document outlining the mobile application development approach, technology stack, and architectural decisions. Includes native iOS and Android development with shared business logic...",fileUrl:"/uploads/mobile-capability.pdf",fileType:"pdf",tags:["mobile","capability","architecture"],artifactType:"Capability",priority:"High",userId:"user1",createdAt:new Date("2024-01-03"),updatedAt:new Date("2024-01-12")},{id:"6",title:"Team Velocity Analysis Q1 2024",content:"Analysis of team velocity trends and sprint performance metrics for Q1 2024. Includes recommendations for capacity planning and process improvements...",fileUrl:"/uploads/velocity-analysis.pdf",fileType:"pdf",tags:["metrics","velocity","analysis"],priority:"Low",userId:"user1",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-10")}];function D(e){let{documents:s=A,folders:t=[],onDocumentView:l,onDocumentDownload:n,onDocumentDelete:d,onDocumentMoveToFolder:p}=e,[u,h]=(0,r.useState)("grid"),[f,j]=(0,r.useState)("date"),v=[...s].sort((e,s)=>{switch(f){case"name":return e.title.localeCompare(s.title);case"type":return e.fileType.localeCompare(s.fileType);default:return new Date(s.updatedAt).getTime()-new Date(e.updatedAt).getTime()}});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Documents"}),(0,a.jsxs)("span",{className:"text-sm text-[var(--muted-foreground)]",children:[s.length," files"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>j("date"===f?"name":"name"===f?"type":"date"),children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Sort by ",f]}),(0,a.jsxs)(x.$,{variant:"outline",size:"sm",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"Filter"]}),(0,a.jsxs)("div",{className:"flex items-center border border-[var(--border)] rounded-md",children:[(0,a.jsx)(x.$,{variant:"grid"===u?"default":"ghost",size:"sm",onClick:()=>h("grid"),className:"rounded-r-none",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"list"===u?"default":"ghost",size:"sm",onClick:()=>h("list"),className:"rounded-l-none",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})})]})]})]}),"grid"===u?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(e=>(0,a.jsx)(b,{document:e,folders:t,onView:l,onDownload:n,onDelete:d,onMoveToFolder:p},e.id))}):(0,a.jsx)(C,{documents:v,onView:l,onDownload:n,onDelete:d}),0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No documents found"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)] mb-4",children:"Start by uploading your first document or creating a new note."}),(0,a.jsx)(x.$,{children:"Upload Document"})]})]})}var S=t(1010),k=t(1360),_=t(5229),z=t(5142),U=t(1647),T=t(7675),F=t(7014);function $(e){let{document:s,onClose:t,onUpdate:l,onDelete:i}=e,[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)({title:s.title,tags:s.tags.join(", "),artifact_type:s.artifact_type||"",priority:s.priority||""}),[m,u]=(0,r.useState)(!1),{user:h}=(0,F.A)(),f=async()=>{if(h){u(!0);try{let e=await T.W.updateDocument(s.id,{title:c.title,tags:c.tags.split(",").map(e=>e.trim()).filter(Boolean),artifact_type:c.artifact_type||null,priority:c.priority||null},h.id);null==l||l(e),d(!1)}catch(e){console.error("Failed to update document:",e)}finally{u(!1)}}},v=async()=>{if(h&&window.confirm("Are you sure you want to delete this document?")){u(!0);try{await T.W.deleteDocument(s.id,h.id),null==i||i(s.id),t()}catch(e){console.error("Failed to delete document:",e)}finally{u(!1)}}},g=()=>{window.open(s.file_url,"_blank")};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(p.Zp,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)(p.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:(0,w.oP)(s.file_type)}),n?(0,a.jsx)(z.p,{value:c.title,onChange:e=>o(s=>({...s,title:e.target.value})),className:"text-xl font-bold bg-transparent border-none p-0 h-auto"}):(0,a.jsx)(p.ZB,{className:"text-xl",children:s.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$,{variant:"ghost",size:"icon",onClick:g,children:(0,a.jsx)(y.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>d(!0),children:(0,a.jsx)(S.A,{className:"w-4 h-4"})}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",onClick:v,children:(0,a.jsx)(k.A,{className:"w-4 h-4"})})]}),(0,a.jsx)(x.$,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(_.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-[var(--muted-foreground)]",children:[(0,a.jsx)("span",{children:s.file_type.toUpperCase()}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:(0,w.z3)(s.file_size)}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsxs)("span",{children:["Updated ",new Date(s.updated_at).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:n?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:c.artifact_type,onChange:e=>o(s=>({...s,artifact_type:e.target.value})),className:"px-3 py-1 border border-[var(--border)] rounded-md text-sm",children:[(0,a.jsx)("option",{value:"",children:"Select Artifact Type"}),(0,a.jsx)("option",{value:"Epic",children:"Epic"}),(0,a.jsx)("option",{value:"Feature",children:"Feature"}),(0,a.jsx)("option",{value:"User Story",children:"User Story"}),(0,a.jsx)("option",{value:"Capability",children:"Capability"}),(0,a.jsx)("option",{value:"Solution",children:"Solution"}),(0,a.jsx)("option",{value:"Theme",children:"Theme"}),(0,a.jsx)("option",{value:"Enabler",children:"Enabler"})]}),(0,a.jsxs)("select",{value:c.priority,onChange:e=>o(s=>({...s,priority:e.target.value})),className:"px-3 py-1 border border-[var(--border)] rounded-md text-sm",children:[(0,a.jsx)("option",{value:"",children:"Select Priority"}),(0,a.jsx)("option",{value:"High",children:"High"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"Low",children:"Low"})]})]}):(0,a.jsxs)(a.Fragment,{children:[s.artifact_type&&(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat((0,w.fK)(s.artifact_type)),children:s.artifact_type}),s.priority&&(0,a.jsxs)("span",{className:"text-sm font-medium ".concat((0,w.eX)(s.priority)),children:[s.priority," Priority"]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-[var(--muted-foreground)]"}),n?(0,a.jsx)(z.p,{value:c.tags,onChange:e=>o(s=>({...s,tags:e.target.value})),placeholder:"Enter tags separated by commas",className:"flex-1"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:s.tags.length>0?s.tags.map((e,s)=>(0,a.jsx)(U.E,{variant:"secondary",className:"text-xs",children:e},s)):(0,a.jsx)("span",{className:"text-sm text-[var(--muted-foreground)]",children:"No tags"})})]}),n&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.$,{onClick:f,disabled:m,size:"sm",children:m?"Saving...":"Save Changes"}),(0,a.jsx)(x.$,{variant:"outline",onClick:()=>{d(!1),o({title:s.title,tags:s.tags.join(", "),artifact_type:s.artifact_type||"",priority:s.priority||""})},size:"sm",children:"Cancel"})]})]})]}),(0,a.jsx)(p.Wu,{className:"max-h-[60vh] overflow-y-auto",children:"pdf"===s.file_type?(0,a.jsx)("div",{className:"h-96 border border-[var(--border)] rounded-lg overflow-hidden",children:(0,a.jsx)("iframe",{src:"".concat(s.file_url,"#view=fit"),className:"w-full h-full",title:s.title})}):"txt"===s.file_type||"md"===s.file_type?(0,a.jsx)("div",{className:"bg-[var(--muted)] rounded-lg p-4 max-h-96 overflow-y-auto",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap text-sm",children:s.content})}):(0,a.jsxs)("div",{className:"bg-[var(--muted)] rounded-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:(0,w.oP)(s.file_type)}),(0,a.jsxs)("p",{className:"text-[var(--muted-foreground)] mb-4",children:["Preview not available for ",s.file_type.toUpperCase()," files"]}),(0,a.jsxs)(x.$,{onClick:g,children:[(0,a.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"Download to View"]})]})})]})})}var P=t(1636),E=t(6191),M=t(2529),R=t(6132),q=t(6648);function I(e){let{folderId:s,onUploadComplete:t,onClose:i}=e,[d,c]=(0,r.useState)([]),[o,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(s||"no-folder"),[j,v]=(0,r.useState)([]),[g,N]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),{user:C}=(0,F.A)(),A=(0,q.S)();(0,r.useEffect)(()=>{C&&D()},[C]);let D=async()=>{if(C)try{let{data:e,error:s}=await A.from("folders").select("*").eq("user_id",C.id).order("name");!s&&e&&v(e)}catch(e){console.error("Error loading folders:",e)}},S=async()=>{if(C&&y.trim())try{let{data:e,error:s}=await A.from("folders").insert([{name:y.trim(),user_id:C.id}]).select().single();!s&&e&&(v(s=>[...s,e]),f(e.id),b(""),N(!1))}catch(e){console.error("Error creating folder:",e)}},k=(0,r.useCallback)(e=>{let s=e.map(e=>({file:e,id:Math.random().toString(36).substr(2,9),status:"pending",progress:0}));c(e=>[...e,...s])},[]),{getRootProps:U,getInputProps:T,isDragActive:$}=(0,P.VB)({onDrop:k,accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"],"text/markdown":[".md"]},maxSize:0x3200000}),I=async e=>"text/plain"===e.type||"text/markdown"===e.type?await e.text():"Content extracted from ".concat(e.name,". Full text extraction will be implemented with PDF.js and other libraries."),L=async()=>{if(!C)return;m(!0);let e=[];for(let s of d)if("success"!==s.status)try{c(e=>e.map(e=>e.id===s.id?{...e,status:"uploading",progress:0}:e));let t=s.file.name.split(".").pop(),a="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9),".").concat(t),r="".concat(C.id,"/").concat(a),{data:l,error:i}=await A.storage.from("documents").upload(r,s.file,{cacheControl:"3600",upsert:!1});if(i)throw i;c(e=>e.map(e=>e.id===s.id?{...e,progress:50}:e));let{data:n}=A.storage.from("documents").getPublicUrl(r),d=await I(s.file);c(e=>e.map(e=>e.id===s.id?{...e,progress:75}:e));let{data:o,error:m}=await A.from("documents").insert({title:s.file.name.replace(/\.[^/.]+$/,""),content:d,file_url:n.publicUrl,file_type:t||"unknown",file_size:s.file.size,tags:[],folder_id:h&&"no-folder"!==h?h:null,user_id:C.id}).select().single();if(m)throw m;c(e=>e.map(e=>e.id===s.id?{...e,status:"success",progress:100,url:n.publicUrl}:e)),e.push(o)}catch(e){console.error("Upload error:",e),c(t=>t.map(t=>t.id===s.id?{...t,status:"error",error:e instanceof Error?e.message:"Upload failed"}:t))}m(!1),e.length>0&&(null==t||t(e))},V=d.every(e=>"success"===e.status),W=d.length>0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(p.Zp,{children:(0,a.jsx)(p.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-[var(--foreground)]",children:"Select Folder"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(u.l6,{value:h,onValueChange:f,children:[(0,a.jsx)(u.bq,{className:"flex-1",children:(0,a.jsx)(u.yv,{placeholder:"Choose a folder (optional)"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"no-folder",children:"No folder"}),j.map(e=>(0,a.jsx)(u.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,a.jsx)(x.$,{variant:"outline",size:"sm",onClick:()=>N(!0),className:"px-3",children:(0,a.jsx)(E.A,{className:"w-4 h-4"})})]}),g&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z.p,{placeholder:"Enter folder name...",value:y,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&S(),className:"flex-1"}),(0,a.jsx)(x.$,{size:"sm",onClick:S,disabled:!y.trim(),children:"Create"}),(0,a.jsx)(x.$,{variant:"outline",size:"sm",onClick:()=>{N(!1),b("")},children:"Cancel"})]})]})})}),(0,a.jsx)(p.Zp,{className:"border-2 border-dashed transition-colors ".concat($?"border-[var(--primary-green)] bg-[var(--light-green)]":"border-[var(--border)]"),children:(0,a.jsx)(p.Wu,{className:"p-8",children:(0,a.jsxs)("div",{...U(),className:"cursor-pointer text-center",children:[(0,a.jsx)("input",{...T()}),(0,a.jsx)(l.A,{className:"mx-auto h-12 w-12 text-[var(--muted-foreground)] mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:$?"Drop files here":"Upload Documents"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)] mb-4",children:"Drag & drop files here, or click to select files"}),(0,a.jsx)("div",{className:"text-sm text-[var(--muted-foreground)]",children:"Supported formats: PDF, DOCX, TXT, MD (Max 50MB per file)"})]})})}),W&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Files to Upload"}),(0,a.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,a.jsx)(p.Zp,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-2xl",children:(0,w.oP)(e.file.name.split(".").pop()||"")}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:e.file.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void c(e=>e.filter(e=>e.id!==s))},className:"text-[var(--muted-foreground)] hover:text-red-600",children:(0,a.jsx)(_.A,{className:"w-4 h-4"})}),"success"===e.status&&(0,a.jsx)(M.A,{className:"w-4 h-4 text-green-600"}),"error"===e.status&&(0,a.jsx)(R.A,{className:"w-4 h-4 text-red-600"})]})]}),(0,a.jsx)("p",{className:"text-xs text-[var(--muted-foreground)]",children:(0,w.z3)(e.file.size)}),"uploading"===e.status&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"bg-[var(--muted)] rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-[var(--primary-green)] h-2 rounded-full transition-all",style:{width:"".concat(e.progress,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-[var(--muted-foreground)] mt-1",children:["Uploading... ",e.progress,"%"]})]}),"error"===e.status&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:e.error}),"success"===e.status&&(0,a.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Upload completed successfully"})]})]})},e.id))})]}),W&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:i,disabled:o,children:"Cancel"}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(x.$,{variant:"outline",onClick:()=>c([]),disabled:o,children:"Clear All"}),(0,a.jsx)(x.$,{onClick:L,disabled:o||0===d.length,children:o?"Uploading...":V?"Upload Complete":"Upload Files"})]})]})]})}function L(e){let{initialDocuments:s}=e,[t,c]=(0,r.useState)(s),[o,m]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[g,N]=(0,r.useState)([]),[y,w]=(0,r.useState)("all"),[b,C]=(0,r.useState)(s),{user:A}=(0,F.A)(),S=(0,q.S)();(0,r.useEffect)(()=>{A&&k()},[A]),(0,r.useEffect)(()=>{_()},[t,y]);let k=async()=>{if(A)try{let{data:e,error:s}=await S.from("folders").select("*").eq("user_id",A.id).order("name");!s&&e&&N(e)}catch(e){console.error("Error loading folders:",e)}},_=()=>{"all"===y?C(t):"none"===y?C(t.filter(e=>!e.folder_id)):C(t.filter(e=>e.folder_id===y))},z=async e=>{if(A&&window.confirm("Are you sure you want to delete this document?"))try{await T.W.deleteDocument(e.id,A.id),c(s=>s.filter(s=>s.id!==e.id))}catch(e){console.error("Failed to delete document:",e)}},U=async(e,s)=>{if(A)try{let{error:t}=await S.from("documents").update({folder_id:s}).eq("id",e.id).eq("user_id",A.id);if(t)throw t;c(t=>t.map(t=>t.id===e.id?{...t,folder_id:s}:t))}catch(e){console.error("Failed to move document to folder:",e)}};return(0,a.jsx)(d.MainLayout,{children:(0,a.jsxs)("div",{className:"p-8",children:[h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Upload Documents"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)]",children:"Add your SAFe artifacts, requirements, and documentation"})]}),(0,a.jsx)(I,{onUploadComplete:e=>{c(s=>[...e,...s]),k(),f(!1)},onClose:()=>f(!1)})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Documents"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)] mt-1",children:"Manage your SAFe artifacts and documentation"})]}),(0,a.jsxs)(x.$,{onClick:()=>f(!0),children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Upload Documents"]})]}),g.length>0&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"w-4 h-4 text-[var(--muted-foreground)]"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Filter by folder:"})]}),(0,a.jsxs)(u.l6,{value:y,onValueChange:w,children:[(0,a.jsx)(u.bq,{className:"w-64",children:(0,a.jsx)(u.yv,{})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsxs)(u.eb,{value:"all",children:["All Documents (",t.length,")"]}),(0,a.jsx)(u.eb,{value:"none",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"No Folder"}),(0,a.jsxs)("span",{className:"text-[var(--muted-foreground)]",children:["(",t.filter(e=>!e.folder_id).length,")"]})]})}),g.map(e=>(0,a.jsx)(u.eb,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-[var(--muted-foreground)]",children:["(",t.filter(s=>s.folder_id===e.id).length,")"]})]})},e.id))]})]})]})}),b.length>0?(0,a.jsx)(D,{documents:b,folders:g,onDocumentView:e=>{m(e)},onDocumentDownload:e=>{window.open(e.file_url,"_blank")},onDocumentDelete:z,onDocumentMoveToFolder:U}):t.length>0?(0,a.jsx)(p.Zp,{className:"text-center py-12",children:(0,a.jsxs)(p.Wu,{children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC1"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No documents in this folder"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)] mb-6",children:"Try selecting a different folder or upload new documents."}),(0,a.jsx)(x.$,{onClick:()=>w("all"),children:"Show All Documents"})]})}):(0,a.jsx)(p.Zp,{className:"text-center py-12",children:(0,a.jsxs)(p.Wu,{children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCC4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No documents yet"}),(0,a.jsx)("p",{className:"text-[var(--muted-foreground)] mb-6",children:"Start by uploading your first document to get organized with SAFe artifacts."}),(0,a.jsxs)(x.$,{onClick:()=>f(!0),children:[(0,a.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Upload Your First Document"]})]})})]}),o&&(0,a.jsx)($,{document:o,onClose:()=>m(null),onUpdate:e=>{c(s=>s.map(s=>s.id===e.id?e:s))},onDelete:e=>{c(s=>s.filter(s=>s.id!==e)),m(null)}})]})})}}},e=>{e.O(0,[954,545,224,478,539,482,673,441,255,358],()=>e(e.s=1691)),_N_E=e.O()}]);